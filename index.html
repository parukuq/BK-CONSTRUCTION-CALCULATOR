<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BK Construction Calculator</title>

<style>
body {font-family: Arial; background:#f5f5f5; padding:15px;}
.header {display:flex; justify-content:space-between; align-items:center;}
input {padding:5px; margin:3px;}
.section {background:white; padding:10px; margin:10px 0; border-radius:10px;}
.row {display:flex; gap:5px; margin-bottom:5px; align-items:center;}
button {padding:5px; margin-top:5px;}
</style>
</head>

<body>

<div class="header">
<h2>BK Construction Calculator</h2>
<div>
<input type="text" id="name" placeholder="Enter Name"><br>
<span id="date"></span>
</div>
</div>

<div id="sections"></div>

<h3>Total: <span id="grandTotal">0</span></h3>

<button onclick="saveImage()">Save Screenshot</button>

<script>

const sections = [
{name:"SLAB", id:"SLAB"},
{name:"BEAM", id:"BEAM"},
{name:"PILLARS", id:"PILLARS"},
{name:"FOOTING", id:"FOOTING"},
{name:"F.BEAM", id:"FBEAM"},
{name:"STEPS", id:"STEPS"},
{name:"TANK", id:"TANK"},
{name:"S.BEAM", id:"SBEAM"}
];

document.getElementById("date").innerText = new Date().toLocaleDateString();

function createSection(sec){
let div=document.createElement("div");
div.className="section";
div.innerHTML=`
<h3>${sec.name}</h3>
<div id="${sec.id}"></div>
<button onclick="addRow('${sec.id}')">+ Add Row</button>
<button onclick="clearSection('${sec.id}')">Clear Section</button>
<p>Total: <span id="${sec.id}_total">0</span></p>`;
document.getElementById("sections").appendChild(div);
addRow(sec.id);
}

function addRow(id){
let row=document.createElement("div");
row.className="row";

let input1=document.createElement("input");
input1.type="number";
input1.className="input1";
input1.placeholder="Input 1";
input1.oninput=calc;

let input2=document.createElement("input");
input2.type="number";
input2.className="input2";
input2.placeholder="Input 2";
input2.oninput=calc;

let output=document.createElement("span");
output.className="output";
output.innerText="0";

let clearBtn=document.createElement("button");
clearBtn.innerText="Clear";
clearBtn.onclick=function(){
input1.value="";
input2.value="";
calc();
};

row.appendChild(input1);
row.appendChild(document.createTextNode(" * "));
row.appendChild(input2);
row.appendChild(document.createTextNode(" = "));
row.appendChild(output);
row.appendChild(clearBtn);

document.getElementById(id).appendChild(row);
}

function clearSection(id){
let rows=document.querySelectorAll('#'+id+' .row');
rows.forEach(r=>{
r.querySelector(".input1").value="";
r.querySelector(".input2").value="";
});
calc();
}

function calc(){
let grand=0;

sections.forEach(sec=>{
let rows=document.querySelectorAll('#'+sec.id+' .row');
let total=0;

rows.forEach(r=>{
let a=parseFloat(r.querySelector(".input1").value)||0;
let b=parseFloat(r.querySelector(".input2").value)||0;
let out=a*b;
r.querySelector(".output").innerText=out.toFixed(2);
total+=out;
});

document.getElementById(sec.id+"_total").innerText=total.toFixed(2);
grand+=total;
});

document.getElementById("grandTotal").innerText=grand.toFixed(2);
}

sections.forEach(createSection);

function saveImage(){
html2canvas(document.body).then(canvas=>{
let link=document.createElement('a');
link.download='BK_Calculation.png';
link.href=canvas.toDataURL();
link.click();
});
}

</script>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

</body>
</html>
